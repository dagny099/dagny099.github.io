/* === Brand tokens (safe if redefined) === */
:root{
  --accent-teal:#3d6c67;
  --accent-purple:#6f5b91;
  --accent-orange:#c0572a;
  --ink-900:#0f172a; --ink-800:#1f2937;
  --gray-200:#e5e7eb; --gray-50:#f8fafc;
}

/* === A) Hero & masthead alignment/behavior === */
.layout--home .page__hero--overlay {
  /* pad hero content to align with content grid; avoids hugging left edge */
  padding-inline: clamp(1rem, 4vw, 3rem);
}
/* Hide hero H1/large title to avoid brand duplication while keeping excerpt */
.layout--home .page__hero--overlay .page__title {
  position: absolute !important;
  clip: rect(1px,1px,1px,1px);
  height: 1px; width: 1px; overflow: hidden; /* accessible hide */
}

/* Masthead spacing + single hover underline */
.masthead .greedy-nav .visible-links > li > a {
  padding-inline: .5rem; /* tighter than default */
  position: relative;
}
.masthead .greedy-nav .visible-links > li > a::after{
  content:"";
  position:absolute; left:0; right:0; bottom:-.35rem;
  height:3px; transform: scaleX(0); transform-origin:left center;
  background: var(--accent-teal);
  transition: transform .18s ease-in-out;
}
.masthead .greedy-nav .visible-links > li > a:hover::after,
.masthead .greedy-nav .visible-links > li.current > a::after,
.masthead .greedy-nav .visible-links > li > a:focus-visible::after{
  transform: scaleX(1);
}
/* Remove competing borders/indicators under nav at hover */
.masthead .greedy-nav .visible-links > li > a:hover { border-bottom: none; }

/* === B) Home section headers (collapsible with custom chevron) === */
.home-section { 
  margin: 2.25rem 0;
  padding-inline: clamp(1rem, 4vw, 3rem); /* grid alignment */
}
.home-accordion > summary {
  list-style: none; cursor: pointer; user-select: none;
  padding: .25rem 0 0; outline: none;
  display: flex; align-items: center; gap: .5rem;
}
.home-accordion > summary::-webkit-details-marker { display: none; }
.home-accordion > summary::before{
  /* Inline SVG chevron for full control (no extra deps) */
  content:"";
  inline-size: 1rem; block-size: 1rem; flex: 0 0 1rem;
  mask: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='black' d='M8.12 9.29L12 13.17l3.88-3.88 1.41 1.41L12 16l-5.29-5.29z'/></svg>") no-repeat center / contain;
  background: var(--ink-800);
  transform: rotate(0deg);
  transition: transform .18s ease-in-out;
}
.home-accordion[open] > summary::before{ transform: rotate(180deg); }
.home-accordion > summary h2{
  margin: 0;
  font-size: clamp(1.375rem, calc(1rem + 1.2vw), 1.75rem);
  line-height: 1.25;
  color: var(--ink-900);
}
.home-accordion:focus-within > summary { outline: 2px solid var(--accent-teal); outline-offset: 2px; }

/* HR control */
.home-divider{ border: 0; border-top: 1px solid var(--gray-200); margin: 2rem 0; }

/* === C) Project cards & teaser placeholder === */
/* Constrain feature_row images to 16:9 and add hover elevation */
.feature__item .archive__item-teaser,
.feature__wrapper .archive__item-teaser{
  aspect-ratio: 16 / 9;
  overflow: hidden; border-radius: 12px; background: var(--gray-50);
}
.feature__item .archive__item-teaser img,
.feature__wrapper .archive__item-teaser img{ object-fit: cover; width: 100%; height: 100%; }

.feature__item, .feature__wrapper .archive__item{
  border-radius: 14px; transition: box-shadow .16s ease, transform .16s ease;
}
.feature__item:hover, .feature__wrapper .archive__item:hover{
  box-shadow: 0 2px 12px rgba(0,0,0,.08); transform: translateY(-2px);
}

/* Neutral fallback when no teaser image is present */
.archive__item-teaser:empty{
  background:
    linear-gradient(180deg, rgba(0,0,0,.04), rgba(0,0,0,.02)),
    #f4f6f8;
  position: relative;
}
.archive__item-teaser:empty::after{
  content:"";
  position:absolute; inset:0; margin:auto; width:48px; height:48px;
  mask: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='black' d='M21 19V5a2 2 0 0 0-2-2H5C3.89 3 3 3.9 3 5v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2zM8.5 13.5l2.5 3.01 3.5-4.51L19 18H5l3.5-4.5zM9 8a2 2 0 1 1-.001 3.999A2 2 0 0 1 9 8z'/></svg>") no-repeat center / contain;
  background: #b6bec8;
}

/* Remove stray leading dash before titles if produced by list styles */
.feature__wrapper .archive__item-title,
.feature__item .archive__item-title{ 
  text-indent: 0; 
}
.feature__wrapper .archive__item-title::marker { content: ""; }

/* --- Vertical rhythm tightening on feature cards --- */
.feature__wrapper .archive__item-title { 
  margin: .6rem 0 .25rem 0;
}
.feature__wrapper .archive__item-excerpt {
  margin: 0 0 .75rem 0;
  color: var(--ink-800);
}
.feature__wrapper .btn {
  margin-top: .5rem;
}

/* Right-aligned subtle CTA under Featured */
.home-cta--right { 
  text-align: right;
  padding-right: clamp(1rem, 4vw, 3rem);
  margin-top: .5rem;
}

/* === D) Resource minis: teal-tinted cards + subtle link === */
.resource-minis{
  display: grid; gap: 1rem;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  margin-top: 1rem;
}
.resource-mini{
  display:flex; gap:.75rem; align-items:flex-start;
  background: color-mix(in oklab, var(--accent-teal) 8%, white);
  border: 1px solid color-mix(in oklab, var(--accent-teal) 18%, white);
  border-radius: 14px; padding: .9rem 1rem;
}
.resource-mini__icon{ 
  inline-size: 1.25rem; block-size: 1.25rem; color: var(--accent-teal);
}
.resource-mini h3{ margin: 0 0 .25rem 0; font-size: 1.05rem; }
.resource-mini p{ margin: 0; color: var(--ink-800); }

/* “Browse all resources” as text link with arrow */
.link-more{
  --_c: var(--accent-teal);
  color: var(--_c); text-decoration: none; font-weight: 600;
  position: relative; padding-right: 1.1rem;
}
.link-more::after{
  content: "→"; position: absolute; right: 0; top: 0;
  transition: transform .16s ease;
}
.link-more:hover::after{ transform: translateX(.2rem); }
.home-cta{ margin-top: .75rem; }

/* === E) Explore chips alignment (kept minimal) === */
.explore-chips{ padding-inline: clamp(1rem, 4vw, 3rem); }

/* === Typographic scale reinforcement (scoped) === */
.layout--home { 
  font-size: clamp(1rem, calc(0.95rem + 0.2vw), 1.0625rem);
}
